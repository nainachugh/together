{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load staticfiles %}

{% block head_title %} My Page {% endblock %}


{% block extrahead %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Progress', 'Tasks'],
          ['In progress', {{inprogress}}],
          ['Awaiting',  {{ awaiting }}],
          ['Completed', {{completed}}]
         
        ]);
       
        var options = {
          pieHole: 0.7,
          colors: ['#EAB126','#1FB58F', '#F24C4E'],
          // legend: 'none',
          pieSliceText: 'none',
          height: 400,
          width: 400,
          legend: {
                 position: 'right',
                 alignment: 'center'
             },
             chartArea: { 
                 left: 10, 
                 top: 10, 
                 width: '130%', 
                 height: '65%'
             },
             // pieStartAngle: 180,
        };
      

        var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
        chart.draw(data, options);
        
    

      }
    </script>
{% endblock %}

{% block content %}


<div class="container">
	<div class="row">
		{% if profile %}
			<div class="col-sm-10 col-sm-offset-1">
				<div class="row">
				<h4 class="pull-right">Welcome, <strong>{{profile}}</strong>.</h4>

				
			</div>
		{% else %}
			<div class="col-sm-12">
				<h4 class="strong pull-right">Click Edit Profile to add your name.<span class="glyphicon glyphicon-hand-up" aria-hidden="true"></span></h4>
			</div>
		{% endif %}
	</div>
		<div class="row" style="height:100px;">
			<div class="col-sm-5">
			<div style="z-index:5; left:90px;top:85px; width: 100px; height: 100px; line-height:100px; text-align:center; position: absolute; font-size:20px"> 
				{% if projects_count > 0 %}

				{{projects_count}} {% if projects_count > 1 %}projects{% else %}project{% endif %}
				{% endif %}
			</div>

			<div id="donutchart"> </div>
			</div>
		<div class="col-sm-3">
			<div class="row" style="height:400px;">
				<div style="height:70%; overflow:scroll; margin:10px; padding:20px; background-color:#484848; border-radius:5px">
					<h4 class="lead">Tasks you're working on </h4>
					<!-- {{myTasks}} -->
					<div class="list-group">
						{% for task in inProgressTasks %}
						<a href="#" class="list-group-item"> {{task}} <span class="badge">{{task.expectedDate}}</span></a>
						{% endfor %}
					</div>
					<h4 class="lead">Tasks waiting for you </h4>
					<!-- {{myTasks}} -->
					<div class="list-group">
						{% for task in awaitingTasks %}
						<a href="#" class="list-group-item"> {{task}} <span class="badge">{{task.expectedDate}}</span></a>
						{% endfor %}

					</div>
				</div>
			</div>
		</div>
		<div class="col-sm-2">
			<div class="row" style="background-color:#efefef">
				<h3>Important Dates</h3>
			</div>
		</div>
	</div>



</div>

{% endblock %}

